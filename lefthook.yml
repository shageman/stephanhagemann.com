pre-push:
  parallel: true

pre-commit:
  parallel: true
  commands:
    structure-validate-config:
      run: bin/packwerk validate
    structure-check:
      run: bin/packwerk check
    structure-visualize:
      run: visualize_packs > packs.dot && git diff --exit-code --quiet "packs.dot"
      stage_fixed: true
    backend-linter:
      files: bin/rubocop --autocorrect --force-exclusion
    tests:
      files: bin/rspec
    console-works:
      files: echo "puts Speaking::Talk.count" | bin/rails c 
